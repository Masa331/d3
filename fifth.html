<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://d3js.org/d3.v5.js"></script>

    <title>second</title>
  </head>
  <body>
    <a href="https://observablehq.com/@d3/lets-make-a-bar-chart/4">link</a>

    <main>
    </main>
  </body>

  <script type="text/javascript">
    data =
      [ ['2020-04-20', 8.11],
        ['2020-04-21', 8.44],
        ['2020-04-22', 7.69],
        ['2020-04-23', 12.1],
        ['2020-04-24', 3.15],
        ['2020-04-25', 3.72],
        ['2020-04-26', 8.24],
      ]

    days = data.map(d => new Date(d[0]));
    hours = data.map(d => d[1]);
    height = 400;

    x = d3.scaleTime()
      .domain([d3.min(days), d3.max(days)])
      .range([0, 960]);

    y = d3.scaleLinear()
      .domain([0, d3.max(hours)])
      .range([0, 20 * hours.length]);


    main = d3.selectAll('main');
    svg = main.append('svg');
    svg.attr('width', x.range()[1])
      .attr('height', height)

    bar = svg.selectAll('g')
      .data(data)
      .join('g')
      .attr('transform', (d, i) => `translate(${x(new Date(d[0]))}, 0)`);

    bar.append('rect')
      .attr('fill', 'steelblue')
      .attr('width', 20)
      .attr('height', (d) => { console.log(y(d[1])); return y(d[1]) });

  </script>
</html>
